(()=>{"use strict";const e=class{constructor(){this.storageArray=this.getStorage()}getStorage(){return void 0!==localStorage.getItem("lists")&&null!==localStorage.getItem("lists")?JSON.parse(localStorage.getItem("lists")):null===localStorage.getItem("lists")||void 0===localStorage.getItem("lists")?{todo:[],workToday:[],work:[],wish:[],course:[],fetes:[],aniv:[]}:void 0}setStorage(e){localStorage.setItem("lists",JSON.stringify(e))}},t=class{constructor(e){this.typeList=e}afficherList(){let t="",a=(new e).getStorage()[this.typeList]||{todo:[],workToday:[],work:[],wish:[],course:[],fetes:[]},s=new Date;for(let e=0;e<a.length;e++){let r="",n="",i="";null!==a[e].date&&void 0!==a[e].date&&(r=new Date(a[e].date[2],a[e].date[1]-1,a[e].date[0]),n=r-s),n=Math.ceil(n/864e5);let o="jours";i=n<4?"timeLeft red":"timeLeft",n>31&&(n=Math.round(n/31),o="mois"),n<1&&n>-1&&(n="today",o=""),null!==a[e].date&&void 0!==a[e].date?t+=`\n        <div class="container" data-id="${a[e].id}">\n        <div class="description">\n          <div  draggable="true" class="text">\n          <p  class="myText">${a[e].texte} <span class="${i}"> ${n} ${o}</span></p>\n          <i class="fa-solid fa-chevron-right"></i>\n          </div>\n        </div>\n        <div class="item">\n        <i class="fa-regular fa-pen-to-square modify"></i\n        ><i class="fa-regular fa-trash-can delete"></i>\n        </div>\n      </div>\n        `:t+=`\n            <div  class="container" data-id="${a[e].id}">\n            <div  class="description">\n              <div draggable="true" class="text">\n              <p  class="myText">${a[e].texte}</p>\n              <i class="fa-solid fa-chevron-right"></i>\n              </div>\n            </div>\n            <div class="item">\n            <i class="fa-regular fa-pen-to-square modify"></i\n            ><i class="fa-regular fa-trash-can delete"></i>\n            </div>\n          </div>\n            `}document.querySelector(".list").innerHTML=t}};var a,s=new Uint8Array(16);function r(){if(!a&&!(a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(s)}const n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var i=[],o=0;o<256;++o)i.push((o+256).toString(16).substr(1));const l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&n.test(e)}(a))throw TypeError("Stringified UUID is invalid");return a},c=function(e,t,a){var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){a=a||0;for(var n=0;n<16;++n)t[a+n]=s[n];return t}return l(s)},d=class{constructor(e,t,a){this.year=e,this.month=t,this.date=a,this.donnée={year:this.year,month:{janvier:31,fevrier:28,mars:31,avril:30,mai:31,juin:30,juillet:31,aout:31,septembre:30,octobre:31,novembre:30,decembre:31},day:["lundi","mardi","mercredi","jeudi","vendredi","samedi","dimanche"]}}obtenirDateActuelle(){let e=new Date,t=e.getFullYear(),a=e.getMonth()+1;return[e.getDate(),a,t]}isThisYearBisextil(){return this.year%4==0&&this.year%100!=0||this.year%400==0}obtenirDateDuMois(e,t,a){return new Date(e,t-1,a-1).getDay()}convertMoisEnLettre(e,t){let a=e.donnée.month;return Object.keys(a)[t-1]}convertMoisLettreEnInt(e,t){let a=Object.keys(e.donnée.month);for(let e=0;e<a.length;e++)if(a[e]===t)return e+1}},u=class{constructor(e,t,a,s){this.year=e,this.mois=t,this.day=a,this.joursSemaine=["Lun.","Mar.","Mer.","Jeu.","Ven.","Sam.","Dim."],this.newYear=s}obtenirJoursDansLeMois(){return this.newYear.donnée.month[this.mois]}tournerAGauche(e){if(e<=0)return e;e--;let t=-document.querySelector(".mois").offsetWidth;return document.getElementById("diapo_container").style.transform=`translateX(${t*e}px)`,e}tournerADroite(e,t){if(++e===t)return e-1;let a=-document.querySelector(".mois").offsetWidth;return document.getElementById("diapo_container").style.transform=`translateX(${a*e}px)`,e}afficherCalendrier(){let e=(new d).obtenirDateActuelle(),t=(new d).donnée.month,a=Object.keys(t).filter(((t,a)=>a===e[1]-1))[0];const s=this.obtenirJoursDansLeMois(),r=this.day;let n=0,i=1,o=document.createElement("div");o.className="containerCalendar";let l=document.createElement("div");l.className="divPara";let c=document.createElement("p"),u=document.createElement("p");c.className="paraMonth",u.className="paraYear";let m=document.createTextNode(`${this.mois}`),g=document.createTextNode(` ${this.year}`);c.appendChild(m),u.appendChild(g),l.appendChild(c),l.appendChild(u),o.appendChild(l);let f=document.createElement("table"),h=document.createElement("thead"),y=document.createElement("tr");this.joursSemaine.forEach((e=>{let t=document.createElement("th"),a=document.createTextNode(`${e}`);t.appendChild(a),y.appendChild(t)})),h.appendChild(y),f.appendChild(h);for(let t=0;t<6;t++){let t=document.createElement("tr");for(let o=0;o<this.joursSemaine.length;o++){let o,l=document.createElement("td");n<r||i>s?o=document.createTextNode(""):(o=document.createTextNode(`${i}`),l.className="joursSemaine",i<e[0]&&this.mois===a&&this.year===e[2]&&(l.className=" outDated"),i++),n++,l.appendChild(o),t.appendChild(l)}f.appendChild(t),o.appendChild(f)}return o}},m={anniversaire:[{date:[3,5,1955],prenom:"Jean Lassalle",avatar:"https://images.rtl.fr/~c/2000v2000/rtl/www/1329985-jean-lassalle-et-son-gilet-jaune-a-l-assemblee-nationale-le-21-novembre-2018.jpg"}]};window.addEventListener("load",(function(){localStorage.setItem("typeList",JSON.stringify("todo"));let e=JSON.parse(localStorage.getItem("typeList"));document.querySelector(".toDo").classList.remove("blue_light"),document.querySelector(".toDo").classList.add("btn-default"),new t(e).afficherList()}));let g=(new d).obtenirDateActuelle(),f=g[2],h=g[1],y=g[0],p=new d(f,h,y),v=f,L=document.createElement("div");L.id="diapo_container";let S="";for(let e=v;e<v+3;e++){let t=new d(e,h,y),a=t.isThisYearBisextil();t.donnée.month.fevrier=a?29:28;for(let e=h;e<13;e++){let a=(new d).convertMoisEnLettre(t,e),s=t.obtenirDateDuMois(t.donnée.year,e,1),r=new u(t.donnée.year,a,s,t).afficherCalendrier();S+=r;let n=document.createElement("div");n.className="mois",n.appendChild(r),L.appendChild(n)}h=1}document.querySelector(".modal_content").appendChild(L),new class{constructor(){this.sortableList=document.getElementById("sortable-list"),this.draggedItem=null,this.sortableList.addEventListener("dragstart",(e=>this.dragstart(e))),this.sortableList.addEventListener("dragover",(e=>this.dragover(e))),this.sortableList.addEventListener("drop",(e=>this.drop(e)))}dragstart(e){this.draggedItem=e.target,e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",this.draggedItem.innerHTML)}dragover(e){e.preventDefault()}drop(a){if(a.preventDefault(),a.target.classList.contains("text")){this.draggedItem;let s=a.target,r=this.draggedItem.closest(".container").dataset.id,n=s.closest(".container").dataset.id,i=new e,o=i.getStorage(),l="",c="";["todo","work","workToday","wish","course","fetes"].forEach((e=>{let a=JSON.parse(localStorage.getItem("typeList"));if(a===e){o[e].forEach(((e,t)=>{e.id===n&&(c=t),e.id===r&&(l=t)}));let s=o[e][l],d=o[e][c];o[e].splice(c,1,s),o[e].splice(l,1,d),i.setStorage(o),new t(a).afficherList()}}))}}},document.addEventListener("click",(e=>{let t=e.target;if(t.classList.contains("aniv")){document.querySelectorAll(".btn").forEach((e=>{e.classList.remove("btn-default"),e.classList.add("blue_light")})),t.classList.remove("blue_light"),t.classList.add("btn-default"),localStorage.setItem("typeList",JSON.stringify("aniv")),JSON.parse(localStorage.getItem("typeList"));let e=new class{constructor(e){this.fetesList=e,this.anniversaire=e.anniversaire}calculerAge(e,t){return(e-t)/31536e6}getCurrentDateMS(){let e=(new d).obtenirDateActuelle();return new Date(e[2],e[1]-1,e[0])}getTempsRestantPourAnniversaire(e,t,a){return(new Date(e[2],t.date[1]-1,t.date[0])-a)/864e5}afficherAnniversaire(){let e="",t=(new d).obtenirDateActuelle(),a=this.getCurrentDateMS();return this.anniversaire.forEach((s=>{let r=new Date(s.date[2],s.date[1],s.date[0]),n=this.getTempsRestantPourAnniversaire(t,s,a),i=this.calculerAge(a,r),o=Math.floor(i),l=(new Date).getTime(),c=(e=>new Date(e[2],e[1]-1,e[0]).getTime())(s.date),d=(l-(c-72e6))/31556952e3;const u=n<=31&&n>0,m=u?"jours":"";o=u?parseInt(d+1):parseInt(d);const g=u?"aura":"a",f=u?"dans":"",h=u?"timeLeft red":"timeLeft minus",y=u?Math.round(n):"";e+=`\n\t\t\t<div class="anivUser">\n\t\t\t\n\t\t\t<div class="follow block">\n\t\t\t<div class="follow__header"><img src="${s.avatar}" alt="" /></div>\n\t\t\t<div class="follow__main">\n\t\t\t\t<h2>${s.prenom}</h2>\n\t\t\t\t<p></span> [${s.date[0]}/${s.date[1]}/${s.date[2]}]<span class="${h}"> ${g} ${o} ans ${f} ${y} ${m}</span></p>\n\t\t\t</div>\n\t\t</div>\n\n\n\t\t\t \n\t     \n\t\t\t</div>\n      `})),e}}(m).afficherAnniversaire();document.querySelector(".list").innerHTML=e}})),[{class:"toDo",typeList:"todo"},{class:"workToday",typeList:"workToday"},{class:"work",typeList:"work"},{class:"wish",typeList:"wish"},{class:"course",typeList:"course"},{class:"fetes",typeList:"fetes"}].forEach((e=>{document.addEventListener("click",(a=>{let s=a.target;if(s.classList.contains("aniv")?(document.querySelector(".input").style.display="none",document.querySelector(".fa-calendar-days").style.display="none"):!s.classList.contains("aniv")&&s.classList.contains("btn")&&(document.querySelector(".input").style.display="flex",document.querySelector(".fa-calendar-days").style.display="flex"),s.classList.contains(`${e.class}`))try{(new class{constructor(){}changerStyles(e){document.querySelectorAll(".btn").forEach((e=>{e.classList.remove("btn-default"),e.classList.add("blue_light")})),e.classList.remove("blue_light"),e.classList.add("btn-default")}}).changerStyles(s),localStorage.setItem("typeList",JSON.stringify(`${e.typeList}`));let a=JSON.parse(localStorage.getItem("typeList"));new t(a).afficherList()}catch(e){console.log(e)}}))}));let w=!1;document.addEventListener("click",(e=>{let t=e.target;if(t.classList.contains("text")){let e=t.closest(".container");w?w&&(e.querySelector(".item").style.transitionDuration="0.5s",e.querySelector(".item").style.marginRight="-200px",e.querySelector(".modify").style.transform="rotate(360deg)",e.querySelector(".delete").style.transform="rotate(360deg)",w=!1):(e.querySelector(".item").style.transitionDuration="0.5s",e.querySelector(".item").style.marginRight="0px",e.querySelector(".modify").style.transform="rotate(-360deg)",e.querySelector(".delete").style.transform="rotate(-360deg)",w=!0)}else if(t.classList.contains("myText")){let e=t.closest(".container");w?w&&(e.querySelector(".item").style.transitionDuration="0.5s",e.querySelector(".item").style.marginRight="-200px",e.querySelector(".modify").style.transform="rotate(360deg)",e.querySelector(".delete").style.transform="rotate(360deg)",w=!1):(e.querySelector(".item").style.transitionDuration="0.5s",e.querySelector(".item").style.marginRight="0px",e.querySelector(".modify").style.transform="rotate(-360deg)",e.querySelector(".delete").style.transform="rotate(-360deg)",w=!0)}}));let b=0,E=L.childElementCount;document.addEventListener("click",(e=>{e.target.classList.contains("fa-angles-left")&&(b=(new u).tournerAGauche(b))})),document.addEventListener("click",(e=>{e.target.classList.contains("fa-angles-right")&&(b=(new u).tournerADroite(b,E))})),document.addEventListener("click",(e=>{if(e.target.classList.contains("close-calendar")){document.querySelector(".modal").classList.add("hidden");let e=document.querySelector(".fa-calendar-days");e.classList.contains("inactive")||e.classList.add("inactive")}})),document.addEventListener("submit",(a=>{a.preventDefault();let s=document.querySelector(".myInput");if(void 0!==s.value&&null!==s.value&&""!==s.value){let a=(new e).getStorage(),r=c(),n=JSON.parse(localStorage.getItem("typeList")),i=a[n]||[],o=document.querySelector(".fa-calendar-days");if(o.classList.contains("inactive"))o.classList.contains("inactive")&&i.push({texte:s.value,id:r});else{let e=JSON.parse(localStorage.getItem("dateCalendar"));i.push({texte:s.value,id:r,date:e})}(new e).setStorage(a),new t(n).afficherList(),s.value=""}else s.value=""})),document.addEventListener("click",(e=>{if(e.target.classList.contains("joursSemaine")){document.querySelectorAll("td").forEach((e=>{e.classList.remove("blue")})),e.target.classList.add("blue");let t=e.target.closest("table").parentElement,a=parseInt(e.target.textContent),s=parseInt(t.querySelector(".paraYear").textContent),r=t.querySelector(".paraMonth").textContent;r=(new d).convertMoisLettreEnInt(p,r),localStorage.setItem("dateCalendar",JSON.stringify([a,r,s]))}})),document.addEventListener("click",(a=>{let s=a.target;if(s.classList.contains("modify")){let a=(new e).getStorage(),r=s.closest(".container").dataset.id,n=prompt("Quoi toi vouloir ajouter : "),i=JSON.parse(localStorage.getItem("typeList"));if(null!=n)for(let s=0;s<a[i].length;s++)a[i][s].id===r&&(a[i][s].texte=n,(new e).setStorage(a),new t(i).afficherList())}})),document.addEventListener("click",(a=>{let s=a.target;if(s.classList.contains("delete")){let a=(new e).getStorage(),r=s.closest(".container").dataset.id,n=JSON.parse(localStorage.getItem("typeList"));for(let t=0;t<a[n].length;t++)a[n][t].id===r&&(a[n].splice(t,1),(new e).setStorage(a));new t(n).afficherList()}})),document.addEventListener("click",(e=>{e.target.classList.contains("search")&&document.querySelector(".modal").classList.add("hidden")})),document.addEventListener("click",(e=>{let t=e.target;t.classList.contains("fa-calendar-days")&&(t.classList.contains("inactive")?(t.classList.remove("inactive"),document.querySelector(".modal").classList.remove("hidden")):t.classList.contains("inactive")||t.classList.add("inactive"))}))})();